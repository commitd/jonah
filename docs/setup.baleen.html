<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Baleen 2.6 · Jonah</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This section expands on the Quick Start section, with a more complex Baleen pipeline and some other instructions in the use of Baleen."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Baleen 2.6 · Jonah"/><meta property="og:type" content="website"/><meta property="og:url" content="https://commitd.github.io/jonah/jonah/index.html"/><meta property="og:description" content="This section expands on the Quick Start section, with a more complex Baleen pipeline and some other instructions in the use of Baleen."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/jonah/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/jonah/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jonah/"><h2 class="headerTitle">Jonah</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/jonah/docs/setup.index.html" target="_self">Setup</a></li><li class=""><a href="/jonah/docs/use.index.html" target="_self">Use</a></li><li class=""><a href="/jonah/docs/dev.index.html" target="_self">Develop</a></li><li class=""><a href="https://github.com/commitd/jonah-server" target="_self">Server Source</a></li><li class=""><a href="https://github.com/commitd/jonah-ui" target="_self">UI Source</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Ingesting</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting started</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.index.html">Setting up Ketos</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.quickstart.html">Quick start</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Installation</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.requirements.html">Requirements</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.troubleshooting.html">Troubleshooting</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Configuration</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.configuration.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.data.html">Setting up data</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.authentication.html">Authentication</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.audit.html">Audit</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Ingesting</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/jonah/docs/setup.baleen.html">Baleen 2.6</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.old-baleen.html">Older Baleen outputs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Other deployments</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.docker.html">Docker</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Baleen 2.6</h1></header><article><div><span><p>This section expands on the Quick Start section, with a more complex Baleen pipeline and some other instructions in the use of Baleen.</p>
<h2><a class="anchor" aria-hidden="true" id="setup"></a><a href="#setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h2>
<p>Download Baleen 2.6 from the <a href="https://github.com/dstl/baleen/releases">releases pages</a> of GitHub.</p>
<p>Before starting Baleen, you should already have installed and running Elasticsearch and Mongo. Elasticsearch in particularly is strict in its versioning: Baleen 2.6 supports Elasticsearch 5.6.</p>
<h2><a class="anchor" aria-hidden="true" id="configuration"></a><a href="#configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration</h2>
<p>A more involved Baleen configuration, as compared to that in the Quick Start, is shown below.</p>
<p>In the same directory your baleen.jar create a runner file, <code>baleen.yaml</code>:</p>
<pre><code class="hljs css languages- yaml"><span class="hljs-attr">pipelines:</span>
<span class="hljs-attr">  - name:</span> <span class="hljs-string">Ketos</span>
<span class="hljs-attr">    file:</span> <span class="hljs-string">ketos-pipeline.yaml</span>
    
<span class="hljs-attr">logging:</span>
<span class="hljs-attr">  loggers:</span>
<span class="hljs-attr">    - name:</span> <span class="hljs-string">console</span>
<span class="hljs-attr">      minLevel:</span> <span class="hljs-string">INFO</span>
</code></pre>
<p>Now create a Baleen pipeline file, called <code>ketos-pipeline.yaml</code>. An example Baleen pipeline, outputting to Elasticsearch and Mongo, would be:</p>
<pre><code class="hljs css languages- yaml"><span class="hljs-attr">elasticsearch:</span>
<span class="hljs-attr">  cluster:</span> <span class="hljs-string">elasticsearch</span>
<span class="hljs-attr">  host:</span> <span class="hljs-string">localhost</span>

<span class="hljs-attr">mongo:</span>
<span class="hljs-attr">  host:</span> <span class="hljs-string">localhost</span>
<span class="hljs-attr">  index:</span> <span class="hljs-string">baleen</span>

<span class="hljs-attr">orderer:</span> <span class="hljs-string">DependencyGraph</span>

<span class="hljs-attr">collectionreader:</span>
<span class="hljs-attr">  class:</span> <span class="hljs-string">FolderReader</span>
  <span class="hljs-comment"># Change this to point to your data</span>
<span class="hljs-attr">  folders:</span> <span class="hljs-string">./input</span>
<span class="hljs-attr">  contentExtractor:</span> <span class="hljs-string">StructureContentExtractor</span>

<span class="hljs-attr">history:</span>
<span class="hljs-attr">  class:</span> <span class="hljs-string">uk.gov.dstl.baleen.core.history.noop.NoopBaleenHistory</span>

<span class="hljs-attr">annotators:</span>
  <span class="hljs-comment"># Optionally add specific file backed gazetteers for known entities:</span>
  <span class="hljs-comment"># - class: gazetteer.File</span>
  <span class="hljs-comment">#   type: Person</span>
  <span class="hljs-comment">#   fileName: data/person.txt        </span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.AddGenderToPerson</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.AddTitleToPerson</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.CleanPunctuation</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.CleanTemporal</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.CorefBrackets</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.CorefCapitalisationAndApostrophe</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.CurrencyDetection</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.EntityInitials</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.MergeAdjacent</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.MergeAdjacentQuantities</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.MergeNationalityIntoEntity</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.NaiveMergeRelations</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.NormalizeOSGB</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.NormalizeTemporal</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.NormalizeWhitespace</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.ReferentToEntity</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.RelationTypeFilter</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.RemoveLowConfidenceEntities</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.RemoveNestedEntities</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.RemoveNestedLocations</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.RemoveOverlappingEntities</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.SplitBrackets</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">cleaners.Surname</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">coreference.SieveCoreference</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">gazetteer.Country</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.NPAtCoordinate</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.NPElement</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.NPLocation</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.NPOrganisation</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.NPTitleEntity</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.QuantityNPEntity</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">grammatical.TOLocationEntity</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">language.OpenNLP</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">misc.GenericMilitaryPlatform</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">misc.GenericVehicle</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">misc.GenericWeapon</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">misc.MentionedAgain</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">misc.NationalityToLocation</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">misc.OrganisationPersonRole</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">organisationRole</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">misc.People</span>
  <span class="hljs-comment"># Having pronouns if goog </span>
  <span class="hljs-comment"># misc.Pronouns</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Area</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.BritishArmyUnits</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Callsign</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.CasRegistryNumber</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Date</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.DateTime</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Distance</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.DocumentNumber</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Dtg</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Email</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.FlightNumber</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Frequency</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Hms</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.IpV4</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.LatLon</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Mgrs</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Money</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Nationality</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Osgb</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Postcode</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.RelativeDate</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.SocialMediaUsername</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.TaskForce</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Telephone</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Time</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.TimeQuantity</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.USTelephone</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.UnqualifiedDate</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Url</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Volume</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">regex.Weight</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">stats.DocumentLanguage</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">stats.OpenNLP</span>
<span class="hljs-attr">    model:</span> <span class="hljs-string">../models/en-ner-location.bin</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">Location</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">stats.OpenNLP</span>
<span class="hljs-attr">    model:</span> <span class="hljs-string">../models/en-ner-organization.bin</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">Organisation</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">stats.OpenNLP</span>
<span class="hljs-attr">    model:</span> <span class="hljs-string">../models/en-ner-person.bin</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">Person</span> 
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.DependencyRelationshipAnnotator</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">dependencyRelationship</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.NPVNP</span>
<span class="hljs-attr">    onlyExisting:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">npvnp</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.SimpleInteraction</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">interaction</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.RegExRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"(:Person:).*(visit\\w*|went to).*(:Location:)"</span>
<span class="hljs-attr">    sourceGroup:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">    valueGroup:</span> <span class="hljs-number">2</span>
<span class="hljs-attr">    targetGroup:</span> <span class="hljs-number">3</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">locatedAt</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.RegExRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"(:Person:).*(:Person:)"</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">associated</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.RegExRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"(:Person:)\\s+&lt;(:CommsIdentifier:)&gt;"</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">hasCommsIdentifier</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.RegExRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"(:Person:)\\s+(:CommsIdentifier:)"</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">hasCommsIdentifier</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.RegExRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"(:Person:)\\s+:(:CommsIdentifier:)"</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">hasCommsIdentifier</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.PartOfSpeechRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"(NNP).*(VBD).*(NNP)"</span>
<span class="hljs-attr">    sourceGroup:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">    valueGroup:</span> <span class="hljs-number">2</span>
<span class="hljs-attr">    targetGroup:</span> <span class="hljs-number">3</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">pos</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">relations.PartOfSpeechRelationshipAnnotator</span>
<span class="hljs-attr">    pattern:</span> <span class="hljs-string">"the (.+) of ((?:NNP ?)+) is ((?:NNP ?)+)"</span>
<span class="hljs-attr">    stopWords:</span> 
<span class="hljs-bullet">      -</span> <span class="hljs-string">the</span>
<span class="hljs-bullet">      -</span> <span class="hljs-string">of</span>
<span class="hljs-bullet">      -</span> <span class="hljs-string">is</span>
<span class="hljs-attr">    sourceGroup:</span> <span class="hljs-number">2</span>
<span class="hljs-attr">    valueGroup:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">    targetGroup:</span> <span class="hljs-number">3</span>
<span class="hljs-attr">    type:</span> <span class="hljs-string">pos</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">triage.RakeKeywords</span>
  
<span class="hljs-attr">consumers:</span>
<span class="hljs-attr">  - class:</span> <span class="hljs-string">analysis.Elasticsearch</span>
<span class="hljs-attr">    index:</span> <span class="hljs-string">baleen</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">analysis.Mongo</span>

</code></pre>
<p>The above configuration uses <code>./input</code> as a source directory. Change this to the appropriate path (absolute or relative). Similarly the</p>
<p>The above configuration refers to a OpenNLP models, which is available from <a href="http://opennlp.sourceforge.net/models-1.5/">OpenNLP directly</a>. Ensure you have downloaded this and change the path in the configuration to their location on disk.</p>
<p>The <a href="https://github.com/dstl/baleen/wiki">Baleen WIki</a> contains further information on configuration. Baleen is extensively documented through Javadoc on the source code, which remains the authoritative source of information on its use.</p>
<h2><a class="anchor" aria-hidden="true" id="running-baleen-on-the-command-line"></a><a href="#running-baleen-on-the-command-line" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Baleen on the command line</h2>
<p>Now run Baleen with:</p>
<pre><code class="hljs">java -jar baleen<span class="hljs-selector-class">.jar</span> runner<span class="hljs-selector-class">.yaml</span>
</code></pre>
<p>Baleen as a (developer focussed) UI which is available on <a href="http://localhost:6413/">http://localhost:6413/</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="running-baleen-in-production"></a><a href="#running-baleen-in-production" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Baleen in production</h2>
<p>Running Baleen in production is beyond the scope of this guide, though we offer considerations.</p>
<p>There are two likely use-cases for ingest into Ketos via Baleen:</p>
<ul>
<li>One of ingestion of a corpus for analysis</li>
<li>Ongoing ingestion</li>
</ul>
<p>Ketos is agnostic to these use cases, it merely queries the documents which are in the databases. Baleen has a focus on continual processing though obviously it can be stopped when data is exhausted.  For example, the FolderReader will monitor for changes or addition of new files in specified directories, continually processing information as new files become available.</p>
<p>Where care should be taken is when Baleen is restarted (either as a result of a crash or perhaps a machine reboot). In general Baleen is not stateful, therefore in the FolderReader case it will begin to reprocess the files with the folder. In a production server, vs a development context, this is likely to be undesirable, and often the FolderReader is combined with the MoveSourceFile consumer which moves the file, once processed, out of the 'input directory' and into another 'done directory'. More sophisticated implementions might use a message queue to feed Baleen with documents.</p>
<p>Memory usage and monitoring are important with automated pipelines, including with Baleen. Large documents or complex documents, eg PDFs which span 100s of pages, can 'clog' the pipeline causing long pauses. It is often sensible to triage or prioritise documents so that the most important documents are processed first, leaving any large but unimportant documents until later.</p>
<p>Baleen has, through its transport system, ways in which to vertically and horizontally scale pipelines. We'd also recommend that pipeline developers review the perfomance of the pipeline overall and the specific annotators on typical documents.</p>
<p>In terms of improvements in output quality, a simple recommendation is to start to buid up file based gazetteers for entities which have been missed (see commented out File gazetteer above). These are very simple to achieve and often easy to build by reading a few documents. The process of entity extraction is iterative, and so processing a few file, reviewing the output in Ketos, before amending the pipeline and processing a new batch is a good way to improve overall results. The same is true for relation and event extraction algorithms.</p>
<p>From a security perspective Baleen has an open HTTP API. Whilst it can be configured with basic security, it is designed to be run insite a protected network, for example behind a firewall.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/jonah/docs/setup.audit.html">← Audit</a><a class="docs-next button" href="/jonah/docs/setup.old-baleen.html">Older Baleen outputs →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Sitemap</h5><a href="/jonah/docs/setup.index.html">Setup</a><a href="/jonah/docs/use.index.html">Use</a><a href="/jonah/docs/dev.index.html">Develop</a></div><div><h5>Resources</h5><a href="https://github.com/commitd/jonah">Source</a></div></section><section class="copyright">Copyright © 2018 Committed</section></footer></div></body></html>