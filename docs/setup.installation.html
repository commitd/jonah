<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Installation · Jonah</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="As we&#x27;ve seen in the [Quick start](setup.quickstart.html) *installing* Ketos can be as simple a extracting the release to directory and running. However there are some additional options open to you."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Installation · Jonah"/><meta property="og:type" content="website"/><meta property="og:url" content="https://commitd.github.io/jonah/jonah/index.html"/><meta property="og:description" content="As we&#x27;ve seen in the [Quick start](setup.quickstart.html) *installing* Ketos can be as simple a extracting the release to directory and running. However there are some additional options open to you."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/jonah/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/jonah/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jonah/"><h2 class="headerTitle">Jonah</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/jonah/docs/setup.index.html" target="_self">Setup</a></li><li class=""><a href="/jonah/docs/use.index.html" target="_self">Use</a></li><li class=""><a href="/jonah/docs/dev.index.html" target="_self">Develop</a></li><li class=""><a href="https://github.com/commitd/jonah-server" target="_self">Server Source</a></li><li class=""><a href="https://github.com/commitd/jonah-ui" target="_self">UI Source</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Installation</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting started</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.index.html">Setting up Ketos</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.quickstart.html">Quick start</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Installation</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.requirements.html">Requirements</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/jonah/docs/setup.installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.troubleshooting.html">Troubleshooting</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Configuration</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.configuration.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.data.html">Setting up data</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.authentication.html">Authentication</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.audit.html">Audit</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Ingesting</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.baleen.html">Baleen 2.6</a></li><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.old-baleen.html">Older Baleen outputs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Other deployments</h3><ul><li class="navListItem"><a class="navItem" href="/jonah/docs/setup.docker.html">Docker</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Installation</h1></header><article><div><span><p>As we've seen in the <a href="setup.quickstart.html">Quick start</a> <em>installing</em> Ketos can be as simple a extracting the release to directory and running. However there are some additional options open to you.</p>
<p>It is recommended in a production environment you install ketos into the <code>/opt/ketos</code> directory. This is a good convention for non-packaged files.</p>
<p>A typical Ketos deployment sits within a directory structure of:</p>
<pre><code class="hljs">/ketos
    # A<span class="hljs-built_in"> simple </span>runner<span class="hljs-built_in"> script
</span>    run.sh 
    # The Ketos application jar
    ketos.jar  
    # Ketos <span class="hljs-keyword">and</span> Spring gonfiguration
    application.yaml
    #
    /ui
        # Directory of UI plugins
    /plugins
        # Directory of JAR<span class="hljs-built_in"> server </span>plugins
</code></pre>
<p>In addition to the <a href="setup.configuration.html">configuration</a>, one way to configure a Ketos deployment is to add or remove plugins from the <code>/ui</code> and <code>/plugins</code> directories.</p>
<p>Removing <code>/ui</code> plugins will remove them from the application sidebar, on restart. As long as you retain the functionality you want in the application this is a safe operation. This means it will not cause other functionality to crash or the application to fail to load. However we aware that if you remove the DocumentReader then the user will not be able to access it at all - including links in another plugin. The link will simply not appear (or be disabled).</p>
<p>Removing server plugins should be safe, though will result in loss of major functionality - for example, prevening you from access to an algorithm. This might have a knock on impact on UI plugins. In the case of the release version of Ketos the only server pluigns can you reasonably remove is one of the Mongo or Elasticseach plugins. This will prevent you from configuring it as a data source though.</p>
<p>Adding UI and server plugins should also be a safe operation. However we are aware that on the server side the developer may not have intended for two plugins to co exist. If you have an 'Elasticsearch plugin' and a 'Better Elasticsearch Plugin' then the latter might be seen as a replacement. Refer to plugin documentation to see whether this is the case.</p>
<h2><a class="anchor" aria-hidden="true" id="running-as-a-service"></a><a href="#running-as-a-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running as a service</h2>
<p>You can install Ketos as a service on Linux so that it will start on boot.</p>
<p>First create a user <code>ketosuser</code> which is the username that the service will run as. You should given this user ownership of <code>ketos.jar</code> and associated files:</p>
<pre><code class="hljs css languages- bash">sudo chown ketosuser -R /path/to/ketos  
</code></pre>
<p>With init.d based system, simply use the commands:</p>
<pre><code class="hljs css languages- bash"><span class="hljs-comment"># Setup the server</span>
sudo ln -s /path/to/ketos.jar /etc/init.d/ketos

<span class="hljs-comment"># Start the service</span>
service ketos start

<span class="hljs-comment"># Note commands to run on boot up are operating system dependent, for example on Debian/Ubuntu</span>
update-rc.d ketos defaults
</code></pre>
<p>For a new systemd based system create a file, called <code>ketos.service</code> in <code>/etc/systemd/system</code>:</p>
<pre><code class="hljs css languages- ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=Ketos
<span class="hljs-attr">After</span>=syslog.target
<span class="hljs-section">
[Service]</span>
<span class="hljs-attr">User</span>=ketosuser
<span class="hljs-attr">ExecStart</span>=/path/to/ketos/ketos.jar
<span class="hljs-attr">SuccessExitStatus</span>=<span class="hljs-number">143</span>
<span class="hljs-section">
[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<p>You should now we able to control the service with</p>
<pre><code class="hljs css languages- bash"><span class="hljs-comment"># Start the service now</span>
systemctl start ketos.server

<span class="hljs-comment"># Start on the service on boot</span>
systemctl stop ketos.server
</code></pre>
<p>To do this Ketos takes advantage of Spring's launcher, which you can <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html">read more</a> about, and how to configure aspects such as memory usage differently to the Java defaults.</p>
<p><strong>You should refer to this document regarding securing the service.</strong></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/jonah/docs/setup.requirements.html">← Requirements</a><a class="docs-next button" href="/jonah/docs/setup.troubleshooting.html">Troubleshooting →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Sitemap</h5><a href="/jonah/docs/setup.index.html">Setup</a><a href="/jonah/docs/use.index.html">Use</a><a href="/jonah/docs/dev.index.html">Develop</a></div><div><h5>Resources</h5><a href="https://github.com/commitd/jonah">Source</a></div></section><section class="copyright">Copyright © 2018 Committed</section></footer></div></body></html>